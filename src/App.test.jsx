export const robots = {
results: [
{
    "gender": "female",
    "name": {
        "title": "Ms",
        "first": "Mackenzie",
        "last": "Kumar"
    },
    "location": {
        "street": {
            "number": 7907,
            "name": "Hugh Watt Drive"
        },
        "city": "New Plymouth",
        "state": "West Coast",
        "country": "New Zealand",
        "postcode": 83677,
        "coordinates": {
            "latitude": "67.2701",
            "longitude": "143.3540"
        },
        "timezone": {
            "offset": "-4:00",
            "description": "Atlantic Time (Canada), Caracas, La Paz"
        }
    },
    "email": "mackenzie.kumar@example.com",
    "login": {
        "uuid": "96c4c68f-de41-43b9-b325-841f51e42e0b",
        "username": "goldenleopard345",
        "password": "blacklab",
        "salt": "5shoSMSn",
        "md5": "04a9e7078baee6614adb3b61aa140a3e",
        "sha1": "5ef032d59394d751bc4c121e388d5f921a105b71",
        "sha256": "2fa68c0cb3fcb67a508f4a64c14435ff8df754a67aecec8809d7a35589335a80"
    },
    "dob": {
        "date": "1950-12-24T03:32:19.993Z",
        "age": 72
    },
    "registered": {
        "date": "2019-03-10T11:13:01.956Z",
        "age": 3
    },
    "phone": "(192)-180-6547",
    "cell": "(140)-229-9919",
    "id": {
        "name": "",
        "value": null
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/women/32.jpg",
        "medium": "https://randomuser.me/api/portraits/med/women/32.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/women/32.jpg"
    },
    "nat": "NZ"
},
{
    "gender": "male",
    "name": {
        "title": "Mr",
        "first": "Isaac",
        "last": "Moore"
    },
    "location": {
        "street": {
            "number": 3509,
            "name": "Taieri Road"
        },
        "city": "Upper Hutt",
        "state": "Canterbury",
        "country": "New Zealand",
        "postcode": 64198,
        "coordinates": {
            "latitude": "14.7919",
            "longitude": "-5.8921"
        },
        "timezone": {
            "offset": "+5:30",
            "description": "Bombay, Calcutta, Madras, New Delhi"
        }
    },
    "email": "isaac.moore@example.com",
    "login": {
        "uuid": "c17044fe-f2ed-4178-b5dd-2982086bc66e",
        "username": "tinyleopard126",
        "password": "groove",
        "salt": "HlbGyRXz",
        "md5": "98b3b98a16c463a3f57a0a1f57e46f62",
        "sha1": "c3ef1789bb68302fee89bd839931bebb9e681c7f",
        "sha256": "0611d465c1591353598de50f68fce9d13307ba8253af751204d3ccfefcfec184"
    },
    "dob": {
        "date": "1957-11-06T03:54:02.276Z",
        "age": 65
    },
    "registered": {
        "date": "2019-08-08T01:09:45.663Z",
        "age": 3
    },
    "phone": "(583)-611-6380",
    "cell": "(620)-436-5334",
    "id": {
        "name": "",
        "value": null
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/men/21.jpg",
        "medium": "https://randomuser.me/api/portraits/med/men/21.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/men/21.jpg"
    },
    "nat": "NZ"
},
{
    "gender": "female",
    "name": {
        "title": "Mrs",
        "first": "Oxana",
        "last": "Hölzl"
    },
    "location": {
        "street": {
            "number": 8599,
            "name": "Finkenweg"
        },
        "city": "Grünberg",
        "state": "Hessen",
        "country": "Germany",
        "postcode": 82889,
        "coordinates": {
            "latitude": "6.5489",
            "longitude": "-169.5911"
        },
        "timezone": {
            "offset": "+4:30",
            "description": "Kabul"
        }
    },
    "email": "oxana.holzl@example.com",
    "login": {
        "uuid": "3f39e6a2-1a5d-40b4-9759-95564ec69ad4",
        "username": "greenmouse762",
        "password": "athens",
        "salt": "0dBhs6Jr",
        "md5": "0d8e310d9a04daac9426eb6e5db2c41a",
        "sha1": "cadc0cb57a7ceb68159b5970135d89bfa6b80d89",
        "sha256": "c4e2e80d48eeacee7a0f2c81962dbd0e57dd957c02213dac2acf5ca22603425b"
    },
    "dob": {
        "date": "1948-03-13T16:08:58.511Z",
        "age": 74
    },
    "registered": {
        "date": "2015-02-04T19:39:44.897Z",
        "age": 7
    },
    "phone": "0337-6733559",
    "cell": "0170-6525456",
    "id": {
        "name": "",
        "value": null
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/women/36.jpg",
        "medium": "https://randomuser.me/api/portraits/med/women/36.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/women/36.jpg"
    },
    "nat": "DE"
},
{
    "gender": "male",
    "name": {
        "title": "Mr",
        "first": "Jordi",
        "last": "Jimenez"
    },
    "location": {
        "street": {
            "number": 2844,
            "name": "Calle de La Luna"
        },
        "city": "Hospitalet de Llobregat",
        "state": "Navarra",
        "country": "Spain",
        "postcode": 73504,
        "coordinates": {
            "latitude": "-30.9180",
            "longitude": "-41.8790"
        },
        "timezone": {
            "offset": "+5:45",
            "description": "Kathmandu"
        }
    },
    "email": "jordi.jimenez@example.com",
    "login": {
        "uuid": "cf1714e9-415a-4b1b-a55b-9c6688f0a838",
        "username": "redrabbit442",
        "password": "767676",
        "salt": "zp7ITHcv",
        "md5": "95ef3df3f3d160ab05162363161f7cad",
        "sha1": "19ca282dbe7694323a8bd582cbd0187ab5092779",
        "sha256": "c095a2798a4ce021cacf2da32ac9d20f96d919eb5351ee2cedf0fd7aeccb962f"
    },
    "dob": {
        "date": "1945-11-10T15:48:03.768Z",
        "age": 77
    },
    "registered": {
        "date": "2019-03-26T10:37:43.425Z",
        "age": 3
    },
    "phone": "983-288-098",
    "cell": "648-823-317",
    "id": {
        "name": "DNI",
        "value": "43362063-Z"
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/men/81.jpg",
        "medium": "https://randomuser.me/api/portraits/med/men/81.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/men/81.jpg"
    },
    "nat": "ES"
},
{
    "gender": "female",
    "name": {
        "title": "Ms",
        "first": "Ida",
        "last": "Nielsen"
    },
    "location": {
        "street": {
            "number": 9307,
            "name": "Dalen"
        },
        "city": "Klitmøller",
        "state": "Syddanmark",
        "country": "Denmark",
        "postcode": 31321,
        "coordinates": {
            "latitude": "-5.1015",
            "longitude": "8.5203"
        },
        "timezone": {
            "offset": "+4:00",
            "description": "Abu Dhabi, Muscat, Baku, Tbilisi"
        }
    },
    "email": "ida.nielsen@example.com",
    "login": {
        "uuid": "b5497c48-6eb6-44f8-b805-0ac60fde53cd",
        "username": "angryduck484",
        "password": "felix1",
        "salt": "iFeqHhkq",
        "md5": "921ead4c09ab8bf226fde03cc42c7914",
        "sha1": "98c58ae74b367eca5efbdf1c6657a4c1ccf036a1",
        "sha256": "493e0ee03a1eff1e097291281e3649a2eb00f2ecf128913d9abb241286007654"
    },
    "dob": {
        "date": "1955-07-16T20:50:25.933Z",
        "age": 67
    },
    "registered": {
        "date": "2003-01-12T17:55:22.493Z",
        "age": 19
    },
    "phone": "35752013",
    "cell": "85362737",
    "id": {
        "name": "CPR",
        "value": "160755-4976"
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/women/38.jpg",
        "medium": "https://randomuser.me/api/portraits/med/women/38.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/women/38.jpg"
    },
    "nat": "DK"
},
{
    "gender": "male",
    "name": {
        "title": "Mr",
        "first": "Oğuzhan",
        "last": "Tunaboylu"
    },
    "location": {
        "street": {
            "number": 4954,
            "name": "Fatih Sultan Mehmet Cd"
        },
        "city": "Hatay",
        "state": "Yalova",
        "country": "Turkey",
        "postcode": 68547,
        "coordinates": {
            "latitude": "-84.5418",
            "longitude": "150.3809"
        },
        "timezone": {
            "offset": "+8:00",
            "description": "Beijing, Perth, Singapore, Hong Kong"
        }
    },
    "email": "oguzhan.tunaboylu@example.com",
    "login": {
        "uuid": "d6ed4652-b655-4b41-96f5-95ae9e15f328",
        "username": "silverlion566",
        "password": "102030",
        "salt": "F9zoQbL9",
        "md5": "e993877eedf609e67ca6beec1832e65a",
        "sha1": "a044e381c5381f124051a386363dee472237b43d",
        "sha256": "61a31e8d94ecdfb89e652f508b5d82b3c7cd841057b66aee702c3a83ac4c5e8f"
    },
    "dob": {
        "date": "1961-03-07T13:02:02.457Z",
        "age": 61
    },
    "registered": {
        "date": "2011-05-30T03:04:08.675Z",
        "age": 11
    },
    "phone": "(833)-717-6204",
    "cell": "(922)-641-6948",
    "id": {
        "name": "",
        "value": null
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/men/78.jpg",
        "medium": "https://randomuser.me/api/portraits/med/men/78.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/men/78.jpg"
    },
    "nat": "TR"
},
{
    "gender": "male",
    "name": {
        "title": "Mr",
        "first": "Umut",
        "last": "Erkekli"
    },
    "location": {
        "street": {
            "number": 6033,
            "name": "Mevlana Cd"
        },
        "city": "Gümüşhane",
        "state": "Uşak",
        "country": "Turkey",
        "postcode": 90079,
        "coordinates": {
            "latitude": "-78.1654",
            "longitude": "-85.1518"
        },
        "timezone": {
            "offset": "-5:00",
            "description": "Eastern Time (US & Canada), Bogota, Lima"
        }
    },
    "email": "umut.erkekli@example.com",
    "login": {
        "uuid": "82245036-3064-49c9-b036-d96a3c5c7ecb",
        "username": "blackladybug243",
        "password": "tiffany",
        "salt": "9WD93R3y",
        "md5": "d110d3c829aadb9610148bc5dea8cb83",
        "sha1": "cf636cd47af10d957419cd9c442cdc8cb2667f33",
        "sha256": "2f66347c6de39a689119e4b55363379d130779e270fe964458b3a1d60d51dc7d"
    },
    "dob": {
        "date": "1952-08-24T20:47:18.689Z",
        "age": 70
    },
    "registered": {
        "date": "2010-06-18T00:18:03.767Z",
        "age": 12
    },
    "phone": "(428)-884-8048",
    "cell": "(292)-027-1380",
    "id": {
        "name": "",
        "value": null
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/men/89.jpg",
        "medium": "https://randomuser.me/api/portraits/med/men/89.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/men/89.jpg"
    },
    "nat": "TR"
},
{
    "gender": "female",
    "name": {
        "title": "Mrs",
        "first": "Madison",
        "last": "Edwards"
    },
    "location": {
        "street": {
            "number": 3427,
            "name": "Valwood Pkwy"
        },
        "city": "Dallas",
        "state": "New Hampshire",
        "country": "United States",
        "postcode": 16609,
        "coordinates": {
            "latitude": "76.2948",
            "longitude": "-49.4130"
        },
        "timezone": {
            "offset": "+1:00",
            "description": "Brussels, Copenhagen, Madrid, Paris"
        }
    },
    "email": "madison.edwards@example.com",
    "login": {
        "uuid": "ccd7c6fa-8f63-4b09-b0c9-848cc65c2c94",
        "username": "greenduck666",
        "password": "thumper",
        "salt": "DLoBFklZ",
        "md5": "76cb9a7dee5b1279407aeafdd06cc124",
        "sha1": "acfd5be4ed9e5ed2008ebeac4ff8d519e7495121",
        "sha256": "11b85394aba0e5cbe3544e5374370974b5c57a884491acbe88a526eace14e70b"
    },
    "dob": {
        "date": "1968-10-16T07:16:00.291Z",
        "age": 54
    },
    "registered": {
        "date": "2006-03-04T11:03:41.581Z",
        "age": 16
    },
    "phone": "(697)-442-3318",
    "cell": "(877)-301-1980",
    "id": {
        "name": "SSN",
        "value": "148-02-7663"
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/women/82.jpg",
        "medium": "https://randomuser.me/api/portraits/med/women/82.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/women/82.jpg"
    },
    "nat": "US"
},
{
    "gender": "male",
    "name": {
        "title": "Mr",
        "first": "Hermitério",
        "last": "Dias"
    },
    "location": {
        "street": {
            "number": 5170,
            "name": "Rua São José "
        },
        "city": "Santa Cruz do Sul",
        "state": "Rio de Janeiro",
        "country": "Brazil",
        "postcode": 13947,
        "coordinates": {
            "latitude": "-83.4848",
            "longitude": "-34.4150"
        },
        "timezone": {
            "offset": "-1:00",
            "description": "Azores, Cape Verde Islands"
        }
    },
    "email": "hermiterio.dias@example.com",
    "login": {
        "uuid": "f44a71bf-7df1-4e64-9e5c-efc7febe6e27",
        "username": "heavyleopard305",
        "password": "csfbr5yy",
        "salt": "XAowWN5W",
        "md5": "8abe54b267f0bd09297551a84d0fa679",
        "sha1": "6253b5682eb6323618c08f975ddb3d1b44b20905",
        "sha256": "ceb1e92dee420caa3a70a666942b0ca3608e33e5957aac8868b07ead94768acc"
    },
    "dob": {
        "date": "1990-07-12T10:28:19.584Z",
        "age": 32
    },
    "registered": {
        "date": "2017-10-10T16:00:02.663Z",
        "age": 5
    },
    "phone": "(24) 9928-8900",
    "cell": "(13) 7545-5672",
    "id": {
        "name": "",
        "value": null
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/men/45.jpg",
        "medium": "https://randomuser.me/api/portraits/med/men/45.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/men/45.jpg"
    },
    "nat": "BR"
},
{
    "gender": "male",
    "name": {
        "title": "Mr",
        "first": "Billy",
        "last": "Pearson"
    },
    "location": {
        "street": {
            "number": 4301,
            "name": "London Road"
        },
        "city": "Cardiff",
        "state": "Dyfed",
        "country": "United Kingdom",
        "postcode": "H85 4DU",
        "coordinates": {
            "latitude": "-61.2885",
            "longitude": "-126.7790"
        },
        "timezone": {
            "offset": "-3:00",
            "description": "Brazil, Buenos Aires, Georgetown"
        }
    },
    "email": "billy.pearson@example.com",
    "login": {
        "uuid": "7e73eed6-d07e-43e4-93b2-4c0fda3a75d3",
        "username": "redpanda816",
        "password": "chocolate",
        "salt": "kWIcoEnt",
        "md5": "f96b48e29e368975b89d46eda68aff0d",
        "sha1": "9e6b8d848efca9f49a3abbe48e545ec19e1fdd2c",
        "sha256": "19602061f5447332632ff2f6a6ce3530593ad85c0acad0afb72b16296e34a5c9"
    },
    "dob": {
        "date": "1969-06-01T09:41:05.686Z",
        "age": 53
    },
    "registered": {
        "date": "2007-09-07T00:25:23.584Z",
        "age": 15
    },
    "phone": "019467 09499",
    "cell": "0728-637-717",
    "id": {
        "name": "NINO",
        "value": "SZ 77 94 58 B"
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/men/46.jpg",
        "medium": "https://randomuser.me/api/portraits/med/men/46.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/men/46.jpg"
    },
    "nat": "GB"
}
]}


import { findByTestId, render, screen, waitFor, waitForElementToBeRemoved } from '@testing-library/react';
import { MemoryRouter } from 'react-router-dom';
import { setupServer } from 'msw/node';
import { rest } from 'msw';
import fetch from 'cross-fetch';
import userEvent from '@testing-library/user-event';
import App from './App';
import RobotList from './views/RobotList/RobotList';
import RUARobotProvider from './context/RUARobotProvider';

const server = setupServer(
  rest.get('https://randomuser.me/api/?results=10&noinfo', (req, res, ctx) => {

    return res(ctx.json(robots));
  }),
  // rest.get(`https://randomuser.me/api/?results=10&noinfo&gender=female`, (req, res, ctx) => {
  //   console.log('req', req);
  //   return res(ctx.json(robots));
  // })
 
)

global.fetch = fetch;

beforeAll(() => server.listen());
afterEach(() => server.resetHandlers());
afterAll(() => server.close());

describe('App', () => {
  it.skip('should be a passing test', () => { });

  it.skip('should find "Mandroid or FemBots, find loading, select a card, click into that cards detail, and then click bake to the previous page.', async () => {
    render(
      <MemoryRouter initialEntries={['/']}>
        <RUARobotProvider>
          <App />
        </RUARobotProvider>
      </MemoryRouter>
    );

    screen.getByText(/mandroid or fembot/i);

    screen.getByText(/Beep Beep Boop...Computing/i);
    
    let card = await screen.findByText(/Mackenzie/i);
    userEvent.click(card);

    card = await screen.findByText(/mackenzie/i);
    screen.getByText(/street/i);
    userEvent.click(card);

    await screen.findByText(/Hermitério/i);
  });

  const fembot = {
    results: [
      {
    "gender": "female",
    "name": {
        "title": "Mrs",
        "first": "Salete",
        "last": "Martins"
    },
    "location": {
        "street": {
            "number": 7784,
            "name": "Rua Quatro"
        },
        "city": "Volta Redonda",
        "state": "Paraná",
        "country": "Brazil",
        "postcode": 42022,
        "coordinates": {
            "latitude": "72.5899",
            "longitude": "81.4608"
        },
        "timezone": {
            "offset": "+9:30",
            "description": "Adelaide, Darwin"
        }
    },
    "email": "salete.martins@example.com",
    "login": {
        "uuid": "699b0549-14a4-494a-acce-1d96ec8f75c2",
        "username": "sadladybug764",
        "password": "dalshe",
        "salt": "XiP2v9Ql",
        "md5": "fca1133b89400d1912e7ad8d5abd7cbf",
        "sha1": "790428dc9a92f2ef22b8209cd2dbbb04683c85f8",
        "sha256": "e40bb592a0c9a31a38ddbaf3a4b1a53e3888cc31861e73ab6a63faa513b81073"
    },
    "dob": {
        "date": "1990-11-12T04:59:05.635Z",
        "age": 32
    },
    "registered": {
        "date": "2017-04-18T21:51:08.127Z",
        "age": 5
    },
    "phone": "(45) 9350-7851",
    "cell": "(27) 2272-8273",
    "id": {
        "name": "",
        "value": null
    },
    "picture": {
        "large": "https://randomuser.me/api/portraits/women/41.jpg",
        "medium": "https://randomuser.me/api/portraits/med/women/41.jpg",
        "thumbnail": "https://randomuser.me/api/portraits/thumb/women/41.jpg"
    },
    "nat": "BR"
    }
    ]
  }


  it('should toggle the dropdown menu, select FemBot, query with "female" search param and return a fembot', async () => {

    render(
      <MemoryRouter initialEntries={['/']}>
        <RUARobotProvider>
          <App />
        </RUARobotProvider>
      </MemoryRouter>
    );

    server.use(
        rest.get(`https://randomuser.me/api/?results=10&noinfo&gender=female`, (req, res, ctx) => {
          
        return res(ctx.json(fembot));
      })
    )
    let dropdown = screen.getByRole('combobox')
    dropdown = userEvent.selectOptions(dropdown, screen.getByRole('option', {name: 'FemBot'}));
    
    await screen.findByText(/Beep Beep Boop...Computing/i)

      screen.debug();

    const femBots = await screen.findByAltText(/female/i);
    console.log(femBots);

    
    const manDroids = screen.queryAllByAltText('male');
    console.log(manDroids.length);
    expect(manDroids.length).toBe(0);

    
  });
})